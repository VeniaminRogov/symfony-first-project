<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
        <title>{% block title %}{% endblock %}</title>
    </head>
    <body>
    {% block body %}
{#        {% include 'components/header.html.twig' %}#}
        {{ render(controller('App\\Controller\\HomeController::countClient')) }}
        <div class="container">
            <h1 class="text-center">
                {% block pageTitle %}{% endblock %}
            </h1>
            <div class="container content">
                {% block content %}{% endblock %}
                {% include 'components/notice.html.twig' %}
            </div>
        </div>
        <foooter class="col-sm footer">
            {% block footer %}
            {% endblock %}
        </foooter>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <script>

            const addPhoneFormDeleteLink = item => {
                const removeFormButton = document.createElement('button');
                removeFormButton.innerHTML = 'Delete phone';

                item.appendChild(removeFormButton);

                removeFormButton.addEventListener('click', e => {
                    e.preventDefault();

                    item.remove();
                })
            }


            const addFormToCollection = (e) => {
                const collectionHolder = document.querySelector('.' + e.currentTarget.dataset.collectionHolderClass);
                const item = document.createElement('li');
                item.innerHTML = collectionHolder.dataset.prototype.replace(/__name__/g, collectionHolder.dataset.index);
                collectionHolder.appendChild(item);
                collectionHolder.dataset.index++;

                addPhoneFormDeleteLink(item);
            }

            document.querySelectorAll('.add_item_link').forEach(btn => {
                btn.addEventListener('click', addFormToCollection);
            });



            document.querySelectorAll('ul.phones li').forEach(phone => {
                addPhoneFormDeleteLink(phone)
            })
        </script>
    {% endblock %}
    </body>
</html>
